{"remainingRequest":"/Users/unlogic/sopo/node_modules/babel-loader/lib/index.js!/Users/unlogic/sopo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/unlogic/sopo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/unlogic/sopo/src/components/logist/modalFrame.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/unlogic/sopo/src/components/logist/modalFrame.vue","mtime":1579704100287},{"path":"/Users/unlogic/sopo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/unlogic/sopo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/unlogic/sopo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/unlogic/sopo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgbXlOb3RpZmljYXRpb24gZnJvbSAnQC9jb21wb25lbnRzL290aGVyL25vdGlmaWNhdGlvbi52dWUnOwppbXBvcnQgRnVuY3MgZnJvbSAiLi4vLi4vYXNzZXRzL2pzLWZ1bmNzL2RlZmF1bHQtZnVuY3MuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ21vZGFsRnJhbWUnLAogIHByb3BzOiBbJ2lzT3BlbiddLAogIGNvbXBvbmVudHM6IHsKICAgIG15Tm90aWZpY2F0aW9uOiBteU5vdGlmaWNhdGlvbgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG5ld1ZhbHVlOiBudWxsLAogICAgICBub3RfdGV4dDogJ9Ce0YjQuNCx0LrQsCcsCiAgICAgIG5vdF9jb2xvcjogJ3JlZCcsCiAgICAgIGlzX25vdF9zaG93OiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhpZGVNb2RhbDogZnVuY3Rpb24gaGlkZU1vZGFsKCkgewogICAgICB0aGlzLiRlbWl0KCd0b2dnbGVNb2RhbCcsIGZhbHNlKTsKICAgIH0sCiAgICBzaG93Tm90aWZpY2F0aW9uOiBmdW5jdGlvbiBzaG93Tm90aWZpY2F0aW9uKHRleHQsIGNvbG9yKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLm5vdF90ZXh0ID0gdGV4dDsKICAgICAgdGhpcy5ub3RfY29sb3IgPSBjb2xvcjsKICAgICAgdGhpcy5pc19ub3Rfc2hvdyA9IHRydWU7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmlzX25vdF9zaG93ID0gZmFsc2U7CgogICAgICAgIF90aGlzLmhpZGVNb2RhbCgpOwogICAgICB9LCAxNTAwKTsKICAgIH0sCiAgICBzYXZlQ2hhbmdlczogZnVuY3Rpb24gc2F2ZUNoYW5nZXMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUudHRuc1t0aGlzLiRzdG9yZS5zdGF0ZS5hY3RpdmVUdG5JbmRleF0uVFROU3RhdHVzID0gdGhpcy5uZXdWYWx1ZTsKICAgICAgdmFyIGRhdGEgPSBuZXcgT2JqZWN0KHRoaXMuJHN0b3JlLnN0YXRlLnR0bnNbdGhpcy4kc3RvcmUuc3RhdGUuYWN0aXZlVHRuSW5kZXhdKTsKICAgICAgZGF0YS5vbGRfc3RhdHVzID0gdGhpcy5pc0FjdGl2ZUluZGV4LnR0blN0YXR1czsKICAgICAgd2luZG93LmNvbnNvbGUubG9nKGRhdGEpOwogICAgICBGdW5jcy5kb1JlcXVlc3QoJ3Bvc3QnLCAnaHR0cHM6Ly9lcnAudW5sb2dpYy5ydS9hcGkvdjEvbG9naXN0aWMvdHRuJywgZGF0YSwgZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBjb2xvciA9ICdncmVlbic7CgogICAgICAgIGlmIChyZXMuZGF0YS5lcnJvcikgewogICAgICAgICAgY29sb3IgPSAncmVkJzsKICAgICAgICB9CgogICAgICAgIF90aGlzMi5zaG93Tm90aWZpY2F0aW9uKHJlcy5kYXRhLmRhdGEsIGNvbG9yKTsKICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5zaG93Tm90aWZpY2F0aW9uKCfQodC10YDQstC10YAg0LLRgNC10LzQtdC90L3QviDQvdC10LTQvtGB0YLRg9C/0LXQvScsICdyZWQnKTsKICAgICAgfSk7CiAgICB9LAogICAgYWN0aXZlU3RhdHVzOiBmdW5jdGlvbiBhY3RpdmVTdGF0dXMoaWR4KSB7CiAgICAgIHZhciByZXN1bHQgPSBuZXcgTnVtYmVyKCk7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJHN0b3JlLnN0YXRlLnN0YXR1c1R5cGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnN0YXR1c1R5cGVzW2ldID09IHRoaXMuaXNBY3RpdmVJbmRleC50dG5TdGF0dXMpIHJlc3VsdCA9IGk7CiAgICAgIH0KCiAgICAgIGlmIChyZXN1bHQgPT0gaWR4KSByZXR1cm4gdHJ1ZTtlbHNlIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBzdGF0dXNDaGFuZ2U6IGZ1bmN0aW9uIHN0YXR1c0NoYW5nZSgpIHsKICAgICAgdGhpcy5uZXdWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0dXNfc2VsZWN0JykudmFsdWU7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgaXNBY3RpdmVJbmRleDogZnVuY3Rpb24gaXNBY3RpdmVJbmRleCgpIHsKICAgICAgd2luZG93LmNvbnNvbGUubG9nKHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2ZVR0bkluZGV4KTsKICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2ZVR0bkluZGV4ICE9IG51bGwpIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS50dG5zW3RoaXMuJHN0b3JlLnN0YXRlLmFjdGl2ZVR0bkluZGV4XTtlbHNlIHJldHVybiB7CiAgICAgICAgdHRuTnVtYmVyOiAn0J3QtdGCJywKICAgICAgICB0dG5EYXRlOiAn0J3QtdGCJywKICAgICAgICB0dG5EZWxEYXRlOiBuZXcgRGF0ZSgpLAogICAgICAgIHR0bkNvbXBhbnk6ICfQndC10YInLAogICAgICAgIHR0blBheW1lbnRlcjogJ9Cd0LXRgicsCiAgICAgICAgdHRuRHJpdmVyOiAn0J3QtdGCJywKICAgICAgICB0dG5Ecml2ZXJOdW06ICfQndC10YInCiAgICAgIH07CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["modalFrame.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div class=\"modal-wrap\" :class=\"{ active: isOpen }\">\n\t\t<myNotification\n\t\t\t\t:text=\"not_text\"\n\t\t\t\t:textColor=\"not_color\"\n\t\t\t\tv-show=\"is_not_show\"/>\n\t\t<div class=\"hover\"></div>\n\t\t<div class=\"modal-frame\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<span>№{{ isActiveIndex.ttnNumber }}</span>\n\t\t\t\t<span>от {{ isActiveIndex.ttnDate }}</span>\n\t\t\t</div>\n\t\t\t<div class=\"row\">\n\t\t\t\t<span>Статус:</span>\n\t\t\t\t<select @change=\"statusChange()\" id=\"status_select\">\n\t\t\t\t\t<option\n\t\t\t\t\t\tv-for=\"(item, idx) in $store.state.statusTypes\" :key=\"idx\"\n\t\t\t\t\t\t:value=\"item\"\n\t\t\t\t\t\t:selected=\"activeStatus(idx)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t{{ item }}\n\t\t\t\t\t</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div class=\"row\">\n\t\t\t\t<span>Дата доставки(отправки):</span>\n\t\t\t\t<input type=\"date\" :value=\"isActiveIndex.ttnDelDate\">\n\t\t\t</div>\n\t\t\t<div class=\"row\">\n\t\t\t\t<span>Транспортная компания:</span>\n\t\t\t\t<span>{{ isActiveIndex.ttnCompany }}</span>\n\t\t\t</div>\n\t\t\t<div class=\"row\">\n\t\t\t\t<span>Плательщик:</span>\n\t\t\t\t<span>{{ isActiveIndex.ttnPaymenter }}</span>\n\t\t\t</div>\n\t\t\t<div class=\"row\">\n\t\t\t\t<span>Водитель:</span>\n\t\t\t\t<span>{{ isActiveIndex.ttnDriver }}</span>\n\t\t\t</div>\n\t\t\t<div class=\"row\">\n\t\t\t\t<span>Номер водителя:</span>\n\t\t\t\t<span>{{ isActiveIndex.ttnDriverNum }}</span>\n\t\t\t</div>\n\t\t\t<div class=\"btn-wrap\">\n\t\t\t\t<button @click=\"saveChanges()\">Применить</button>\n\t\t\t\t<button @click=\"hideModal()\">Закрыть</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport myNotification from '@/components/other/notification.vue'\nimport Funcs from '../../assets/js-funcs/default-funcs.js'\n\texport default {\n\t\tname: 'modalFrame',\n\t\tprops: ['isOpen'],\n\t\tcomponents: {\n\t\t\tmyNotification\n\t\t},\n\t\tdata: () => {\n\t\t\treturn {\n\t\t\t\t\tnewValue: null,\n\t\t\t\t\tnot_text: 'Ошибка',\n\t\t\t\t\tnot_color: 'red',\n\t\t\t\t\tis_not_show: false\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\thideModal() {\n\t\t\t\tthis.$emit('toggleModal', false);\n\t\t\t},\n\t\t\tshowNotification(text, color) {\n\t\t\t\tthis.not_text = text;\n\t\t\t\tthis.not_color = color;\n\t\t\t\tthis.is_not_show = true;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.is_not_show = false;\n\t\t\t\t\tthis.hideModal();\n\t\t\t\t}, 1500);\n\t\t\t},\n\t\t\tsaveChanges() {\n\t\t\t\tthis.$store.state.ttns[this.$store.state.activeTtnIndex].TTNStatus = this.newValue;\n\t\t\t\tlet data = new Object(this.$store.state.ttns[this.$store.state.activeTtnIndex]);\n\t\t\t\tdata.old_status = this.isActiveIndex.ttnStatus;\n\t\t\t\twindow.console.log(data);\n\t\t\t\tFuncs.doRequest(\n\t\t\t\t\t'post',\n\t\t\t\t\t'https://erp.unlogic.ru/api/v1/logistic/ttn',\n\t\t\t\t\tdata,\n\t\t\t\t\tres => {\n\t\t\t\t\t\tlet color = 'green';\n\t\t\t\t\t\tif (res.data.error) {\n\t\t\t\t\t\t\tcolor = 'red';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.showNotification(res.data.data, color);\n\t\t\t\t\t},\n\t\t\t\t\t() => { this.showNotification('Сервер временно недоступен', 'red'); }\n\t\t\t\t);\n\t\t\t},\n\t\t\tactiveStatus(idx) {\n\t\t\t\tlet result = new Number();\n\t\t\t\tfor (let i = 0; i < this.$store.state.statusTypes.length; i++) {\n\t\t\t\t\tif (this.$store.state.statusTypes[i] == this.isActiveIndex.ttnStatus)\n\t\t\t\t\t\tresult = i;\n\t\t\t\t}\n\t\t\t\tif (result == idx)\n\t\t\t\t\treturn true;\n\t\t\t\telse\n\t\t\t\t\treturn false;\n\t\t\t},\n\t\t\tstatusChange() {\n\t\t\t\tthis.newValue = document.getElementById('status_select').value;\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tisActiveIndex() {\n\t\t\t\twindow.console.log(this.$store.state.activeTtnIndex);\n\t\t\t\tif (this.$store.state.activeTtnIndex != null) \n\t\t\t\t\treturn this.$store.state.ttns[this.$store.state.activeTtnIndex];\n\t\t\t\telse \n\t\t\t\t\treturn {\n\t\t\t\t\t\tttnNumber: 'Нет',\n\t\t\t\t\t\tttnDate: 'Нет',\n\t\t\t\t\t\tttnDelDate: new Date(),\n\t\t\t\t\t\tttnCompany: 'Нет',\n\t\t\t\t\t\tttnPaymenter: 'Нет',\n\t\t\t\t\t\tttnDriver: 'Нет',\n\t\t\t\t\t\tttnDriverNum: 'Нет'\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"less\">\n\t@import url('../../assets/less-templates/base.less');\n\t.modal-wrap {\n\t\tposition: fixed;\n\t\ttop: 35px;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100vh;\n\t\topacity: 0;\n\t\tz-index: -2;\n\t\ttransition: all .3s linear;\n\n\t\t& .hover {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tbackground: #000;\n\t\t\topacity: .7;\n\t\t}\n\n\t\t& .modal-frame {\n\t\t\t.flex(column, center, center);\n\t\t\tposition: absolute;\n\t\t\twidth: 100%;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tpadding: 0 5px;\n\t\t\tborder-radius: 2px;\n\t\t\theight: 100vh;\n\t\t\tbackground: @green-color;\n\t\t\tcolor: #fff;\n\n\t\t\t& .row {\n\t\t\t\t.flex(row, space-between, center);\n\t\t\t\tpadding: 15px 5px;\n\t\t\t\twidth: 100%;\n\t\t\t\tborder-bottom: 1px solid #fff;\n\t\t\t\t& span, select {\n\t\t\t\t\tfont-size: 1.1em;\n\t\t\t\t}\n\t\t\t\t& span:last-child {\n\t\t\t\t\ttext-align: right;\n\t\t\t\t}\n\t\t\t\t& select, input {\n\t\t\t\t\t.input();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t& .row:first-child {\n\t\t\t\t& span {\n\t\t\t\t\tfont-size: 1.3em;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t& .btn-wrap {\n\t\t\t\t.flex(row, center, center);\n\t\t\t\twidth: 100%;\n\t\t\t\t& button {\n\t\t\t\t\t.button(5px, @green-color, #fff);\n\t\t\t\t\tmargin: 10px;\n\t\t\t\t}\n\n\t\t\t\t& button:last-child {\n\t\t\t\t\t.button(5px, #fff, @green-color);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.active {\n\t\tz-index: 100;\n\t\topacity: 1;\n\t}\n</style>\n"],"sourceRoot":"src/components/logist"}]}