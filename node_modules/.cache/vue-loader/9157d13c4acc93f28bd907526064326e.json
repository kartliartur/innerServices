{"remainingRequest":"/Users/unlogic/sopo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/unlogic/sopo/src/components/logist/modalFrame.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/unlogic/sopo/src/components/logist/modalFrame.vue","mtime":1579704100287},{"path":"/Users/unlogic/sopo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/unlogic/sopo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/unlogic/sopo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/unlogic/sopo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBteU5vdGlmaWNhdGlvbiBmcm9tICdAL2NvbXBvbmVudHMvb3RoZXIvbm90aWZpY2F0aW9uLnZ1ZScKaW1wb3J0IEZ1bmNzIGZyb20gJy4uLy4uL2Fzc2V0cy9qcy1mdW5jcy9kZWZhdWx0LWZ1bmNzLmpzJwoJZXhwb3J0IGRlZmF1bHQgewoJCW5hbWU6ICdtb2RhbEZyYW1lJywKCQlwcm9wczogWydpc09wZW4nXSwKCQljb21wb25lbnRzOiB7CgkJCW15Tm90aWZpY2F0aW9uCgkJfSwKCQlkYXRhOiAoKSA9PiB7CgkJCXJldHVybiB7CgkJCQkJbmV3VmFsdWU6IG51bGwsCgkJCQkJbm90X3RleHQ6ICfQntGI0LjQsdC60LAnLAoJCQkJCW5vdF9jb2xvcjogJ3JlZCcsCgkJCQkJaXNfbm90X3Nob3c6IGZhbHNlCgkJCX0KCQl9LAoJCW1ldGhvZHM6IHsKCQkJaGlkZU1vZGFsKCkgewoJCQkJdGhpcy4kZW1pdCgndG9nZ2xlTW9kYWwnLCBmYWxzZSk7CgkJCX0sCgkJCXNob3dOb3RpZmljYXRpb24odGV4dCwgY29sb3IpIHsKCQkJCXRoaXMubm90X3RleHQgPSB0ZXh0OwoJCQkJdGhpcy5ub3RfY29sb3IgPSBjb2xvcjsKCQkJCXRoaXMuaXNfbm90X3Nob3cgPSB0cnVlOwoJCQkJc2V0VGltZW91dCgoKSA9PiB7CgkJCQkJdGhpcy5pc19ub3Rfc2hvdyA9IGZhbHNlOwoJCQkJCXRoaXMuaGlkZU1vZGFsKCk7CgkJCQl9LCAxNTAwKTsKCQkJfSwKCQkJc2F2ZUNoYW5nZXMoKSB7CgkJCQl0aGlzLiRzdG9yZS5zdGF0ZS50dG5zW3RoaXMuJHN0b3JlLnN0YXRlLmFjdGl2ZVR0bkluZGV4XS5UVE5TdGF0dXMgPSB0aGlzLm5ld1ZhbHVlOwoJCQkJbGV0IGRhdGEgPSBuZXcgT2JqZWN0KHRoaXMuJHN0b3JlLnN0YXRlLnR0bnNbdGhpcy4kc3RvcmUuc3RhdGUuYWN0aXZlVHRuSW5kZXhdKTsKCQkJCWRhdGEub2xkX3N0YXR1cyA9IHRoaXMuaXNBY3RpdmVJbmRleC50dG5TdGF0dXM7CgkJCQl3aW5kb3cuY29uc29sZS5sb2coZGF0YSk7CgkJCQlGdW5jcy5kb1JlcXVlc3QoCgkJCQkJJ3Bvc3QnLAoJCQkJCSdodHRwczovL2VycC51bmxvZ2ljLnJ1L2FwaS92MS9sb2dpc3RpYy90dG4nLAoJCQkJCWRhdGEsCgkJCQkJcmVzID0+IHsKCQkJCQkJbGV0IGNvbG9yID0gJ2dyZWVuJzsKCQkJCQkJaWYgKHJlcy5kYXRhLmVycm9yKSB7CgkJCQkJCQljb2xvciA9ICdyZWQnOwoJCQkJCQl9CgkJCQkJCXRoaXMuc2hvd05vdGlmaWNhdGlvbihyZXMuZGF0YS5kYXRhLCBjb2xvcik7CgkJCQkJfSwKCQkJCQkoKSA9PiB7IHRoaXMuc2hvd05vdGlmaWNhdGlvbign0KHQtdGA0LLQtdGAINCy0YDQtdC80LXQvdC90L4g0L3QtdC00L7RgdGC0YPQv9C10L0nLCAncmVkJyk7IH0KCQkJCSk7CgkJCX0sCgkJCWFjdGl2ZVN0YXR1cyhpZHgpIHsKCQkJCWxldCByZXN1bHQgPSBuZXcgTnVtYmVyKCk7CgkJCQlmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuJHN0b3JlLnN0YXRlLnN0YXR1c1R5cGVzLmxlbmd0aDsgaSsrKSB7CgkJCQkJaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnN0YXR1c1R5cGVzW2ldID09IHRoaXMuaXNBY3RpdmVJbmRleC50dG5TdGF0dXMpCgkJCQkJCXJlc3VsdCA9IGk7CgkJCQl9CgkJCQlpZiAocmVzdWx0ID09IGlkeCkKCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCWVsc2UKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCX0sCgkJCXN0YXR1c0NoYW5nZSgpIHsKCQkJCXRoaXMubmV3VmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzX3NlbGVjdCcpLnZhbHVlOwoJCQl9CgkJfSwKCQljb21wdXRlZDogewoJCQlpc0FjdGl2ZUluZGV4KCkgewoJCQkJd2luZG93LmNvbnNvbGUubG9nKHRoaXMuJHN0b3JlLnN0YXRlLmFjdGl2ZVR0bkluZGV4KTsKCQkJCWlmICh0aGlzLiRzdG9yZS5zdGF0ZS5hY3RpdmVUdG5JbmRleCAhPSBudWxsKSAKCQkJCQlyZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudHRuc1t0aGlzLiRzdG9yZS5zdGF0ZS5hY3RpdmVUdG5JbmRleF07CgkJCQllbHNlIAoJCQkJCXJldHVybiB7CgkJCQkJCXR0bk51bWJlcjogJ9Cd0LXRgicsCgkJCQkJCXR0bkRhdGU6ICfQndC10YInLAoJCQkJCQl0dG5EZWxEYXRlOiBuZXcgRGF0ZSgpLAoJCQkJCQl0dG5Db21wYW55OiAn0J3QtdGCJywKCQkJCQkJdHRuUGF5bWVudGVyOiAn0J3QtdGCJywKCQkJCQkJdHRuRHJpdmVyOiAn0J3QtdGCJywKCQkJCQkJdHRuRHJpdmVyTnVtOiAn0J3QtdGCJwoJCQkJCX0KCQkJfQoJCX0KCX0K"},{"version":3,"sources":["modalFrame.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"modalFrame.vue","sourceRoot":"src/components/logist","sourcesContent":["<template>\n\t<div class=\"modal-wrap\" :class=\"{ active: isOpen }\">\n\t\t<myNotification\n\t\t\t\t:text=\"not_text\"\n\t\t\t\t:textColor=\"not_color\"\n\t\t\t\tv-show=\"is_not_show\"/>\n\t\t<div class=\"hover\"></div>\n\t\t<div class=\"modal-frame\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<span>№{{ isActiveIndex.ttnNumber }}</span>\n\t\t\t\t<span>от {{ isActiveIndex.ttnDate }}</span>\n\t\t\t</div>\n\t\t\t<div class=\"row\">\n\t\t\t\t<span>Статус:</span>\n\t\t\t\t<select @change=\"statusChange()\" id=\"status_select\">\n\t\t\t\t\t<option\n\t\t\t\t\t\tv-for=\"(item, idx) in $store.state.statusTypes\" :key=\"idx\"\n\t\t\t\t\t\t:value=\"item\"\n\t\t\t\t\t\t:selected=\"activeStatus(idx)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t{{ item }}\n\t\t\t\t\t</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div class=\"row\">\n\t\t\t\t<span>Дата доставки(отправки):</span>\n\t\t\t\t<input type=\"date\" :value=\"isActiveIndex.ttnDelDate\">\n\t\t\t</div>\n\t\t\t<div class=\"row\">\n\t\t\t\t<span>Транспортная компания:</span>\n\t\t\t\t<span>{{ isActiveIndex.ttnCompany }}</span>\n\t\t\t</div>\n\t\t\t<div class=\"row\">\n\t\t\t\t<span>Плательщик:</span>\n\t\t\t\t<span>{{ isActiveIndex.ttnPaymenter }}</span>\n\t\t\t</div>\n\t\t\t<div class=\"row\">\n\t\t\t\t<span>Водитель:</span>\n\t\t\t\t<span>{{ isActiveIndex.ttnDriver }}</span>\n\t\t\t</div>\n\t\t\t<div class=\"row\">\n\t\t\t\t<span>Номер водителя:</span>\n\t\t\t\t<span>{{ isActiveIndex.ttnDriverNum }}</span>\n\t\t\t</div>\n\t\t\t<div class=\"btn-wrap\">\n\t\t\t\t<button @click=\"saveChanges()\">Применить</button>\n\t\t\t\t<button @click=\"hideModal()\">Закрыть</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport myNotification from '@/components/other/notification.vue'\nimport Funcs from '../../assets/js-funcs/default-funcs.js'\n\texport default {\n\t\tname: 'modalFrame',\n\t\tprops: ['isOpen'],\n\t\tcomponents: {\n\t\t\tmyNotification\n\t\t},\n\t\tdata: () => {\n\t\t\treturn {\n\t\t\t\t\tnewValue: null,\n\t\t\t\t\tnot_text: 'Ошибка',\n\t\t\t\t\tnot_color: 'red',\n\t\t\t\t\tis_not_show: false\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\thideModal() {\n\t\t\t\tthis.$emit('toggleModal', false);\n\t\t\t},\n\t\t\tshowNotification(text, color) {\n\t\t\t\tthis.not_text = text;\n\t\t\t\tthis.not_color = color;\n\t\t\t\tthis.is_not_show = true;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.is_not_show = false;\n\t\t\t\t\tthis.hideModal();\n\t\t\t\t}, 1500);\n\t\t\t},\n\t\t\tsaveChanges() {\n\t\t\t\tthis.$store.state.ttns[this.$store.state.activeTtnIndex].TTNStatus = this.newValue;\n\t\t\t\tlet data = new Object(this.$store.state.ttns[this.$store.state.activeTtnIndex]);\n\t\t\t\tdata.old_status = this.isActiveIndex.ttnStatus;\n\t\t\t\twindow.console.log(data);\n\t\t\t\tFuncs.doRequest(\n\t\t\t\t\t'post',\n\t\t\t\t\t'https://erp.unlogic.ru/api/v1/logistic/ttn',\n\t\t\t\t\tdata,\n\t\t\t\t\tres => {\n\t\t\t\t\t\tlet color = 'green';\n\t\t\t\t\t\tif (res.data.error) {\n\t\t\t\t\t\t\tcolor = 'red';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.showNotification(res.data.data, color);\n\t\t\t\t\t},\n\t\t\t\t\t() => { this.showNotification('Сервер временно недоступен', 'red'); }\n\t\t\t\t);\n\t\t\t},\n\t\t\tactiveStatus(idx) {\n\t\t\t\tlet result = new Number();\n\t\t\t\tfor (let i = 0; i < this.$store.state.statusTypes.length; i++) {\n\t\t\t\t\tif (this.$store.state.statusTypes[i] == this.isActiveIndex.ttnStatus)\n\t\t\t\t\t\tresult = i;\n\t\t\t\t}\n\t\t\t\tif (result == idx)\n\t\t\t\t\treturn true;\n\t\t\t\telse\n\t\t\t\t\treturn false;\n\t\t\t},\n\t\t\tstatusChange() {\n\t\t\t\tthis.newValue = document.getElementById('status_select').value;\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tisActiveIndex() {\n\t\t\t\twindow.console.log(this.$store.state.activeTtnIndex);\n\t\t\t\tif (this.$store.state.activeTtnIndex != null) \n\t\t\t\t\treturn this.$store.state.ttns[this.$store.state.activeTtnIndex];\n\t\t\t\telse \n\t\t\t\t\treturn {\n\t\t\t\t\t\tttnNumber: 'Нет',\n\t\t\t\t\t\tttnDate: 'Нет',\n\t\t\t\t\t\tttnDelDate: new Date(),\n\t\t\t\t\t\tttnCompany: 'Нет',\n\t\t\t\t\t\tttnPaymenter: 'Нет',\n\t\t\t\t\t\tttnDriver: 'Нет',\n\t\t\t\t\t\tttnDriverNum: 'Нет'\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"less\">\n\t@import url('../../assets/less-templates/base.less');\n\t.modal-wrap {\n\t\tposition: fixed;\n\t\ttop: 35px;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100vh;\n\t\topacity: 0;\n\t\tz-index: -2;\n\t\ttransition: all .3s linear;\n\n\t\t& .hover {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tbackground: #000;\n\t\t\topacity: .7;\n\t\t}\n\n\t\t& .modal-frame {\n\t\t\t.flex(column, center, center);\n\t\t\tposition: absolute;\n\t\t\twidth: 100%;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tpadding: 0 5px;\n\t\t\tborder-radius: 2px;\n\t\t\theight: 100vh;\n\t\t\tbackground: @green-color;\n\t\t\tcolor: #fff;\n\n\t\t\t& .row {\n\t\t\t\t.flex(row, space-between, center);\n\t\t\t\tpadding: 15px 5px;\n\t\t\t\twidth: 100%;\n\t\t\t\tborder-bottom: 1px solid #fff;\n\t\t\t\t& span, select {\n\t\t\t\t\tfont-size: 1.1em;\n\t\t\t\t}\n\t\t\t\t& span:last-child {\n\t\t\t\t\ttext-align: right;\n\t\t\t\t}\n\t\t\t\t& select, input {\n\t\t\t\t\t.input();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t& .row:first-child {\n\t\t\t\t& span {\n\t\t\t\t\tfont-size: 1.3em;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t& .btn-wrap {\n\t\t\t\t.flex(row, center, center);\n\t\t\t\twidth: 100%;\n\t\t\t\t& button {\n\t\t\t\t\t.button(5px, @green-color, #fff);\n\t\t\t\t\tmargin: 10px;\n\t\t\t\t}\n\n\t\t\t\t& button:last-child {\n\t\t\t\t\t.button(5px, #fff, @green-color);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.active {\n\t\tz-index: 100;\n\t\topacity: 1;\n\t}\n</style>\n"]}]}